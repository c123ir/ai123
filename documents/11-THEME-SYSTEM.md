# 11-THEME-SYSTEM.md (ai123/documents/11-THEME-SYSTEM.md)

# راهنمای سیستم تم روشن/تاریک

## مقدمه
پروژه SmartAi123 به صورت پیش‌فرض از دو حالت نمایشی تاریک و روشن پشتیبانی می‌کند. این سند نحوه پیاده‌سازی، استفاده و توسعه این سیستم را توضیح می‌دهد.

## معماری سیستم تم

### ساختار پایه
سیستم تم با استفاده از Ant Design و ConfigProvider پیاده‌سازی شده است:
- استفاده از سیستم تم Ant Design برای تعریف رنگ‌ها و سایر مقادیر وابسته به تم
- پیاده‌سازی ThemeContext برای مدیریت وضعیت تم در سطح برنامه
- ذخیره‌سازی ترجیحات کاربر در localStorage

### مکانیزم تغییر تم
- استفاده از ConfigProvider با تنظیمات algorithm برای تغییر بین حالت تاریک و روشن
- به‌روزرسانی خودکار تمام کامپوننت‌های Ant Design با تغییر تم
- اعمال انیمیشن هنگام تغییر تم برای تجربه کاربری بهتر

### پیاده‌سازی با Ant Design
```tsx
import { ConfigProvider, theme } from 'antd';
const { defaultAlgorithm, darkAlgorithm } = theme;

// تنظیمات تم در ThemeContext
const themeConfig = {
  algorithm: isDarkMode ? darkAlgorithm : defaultAlgorithm,
  token: {
    // متغیرهای رنگ
    colorPrimary: '#4caf50',
    colorSuccess: '#4caf50',
    colorInfo: '#2196f3',
    colorWarning: '#ff9800',
    colorError: '#f44336',
    
    // دیگر متغیرها
    borderRadius: 8,
    fontFamily: '"Vazirmatn", "Roboto", "Helvetica", "Arial", sans-serif',
  },
};

// استفاده در کامپوننت
<ConfigProvider theme={themeConfig} direction="rtl">
  {children}
</ConfigProvider>
```

## متغیرهای رنگ

### رنگ‌های پایه
هر دو تم دارای مجموعه‌ای از رنگ‌های پایه هستند:
- رنگ‌های اصلی برند (برگرفته از رنگ‌های توکن MoneyBell)
- رنگ‌های پس‌زمینه (اولیه، ثانویه، سوم)
- رنگ‌های متن (اصلی، ثانویه، غیرفعال)
- رنگ‌های اکشن (موفقیت، خطا، هشدار، اطلاعات)

### نام‌گذاری متغیرها
استفاده از نام‌های معنادار و سازگار برای متغیرهای CSS:
```
--color-bg-primary
--color-bg-secondary
--color-text-primary
--color-text-secondary
--color-primary
--color-accent
```

## پیاده‌سازی در کامپوننت‌ها

### استفاده از سیستم تم Ant Design
- کامپوننت‌های Ant Design به صورت خودکار از تم فعلی پیروی می‌کنند
- برای کامپوننت‌های سفارشی، استفاده از Context برای دسترسی به وضعیت تم
- استفاده از کلاس‌های کمکی برای اعمال رنگ‌های متناسب با تم

### کامپوننت تغییر تم
- دکمه تغییر وضعیت با آیکون متناسب (خورشید/ماه)
- تغییر خودکار با توجه به ترجیحات سیستم کاربر
- ذخیره‌سازی انتخاب کاربر بین جلسات

## سازگاری با RTL

### ملاحظات خاص
- تست هر دو حالت تم در وضعیت RTL
- اطمینان از کنتراست مناسب رنگ‌ها در هر دو حالت
- سازگاری سایه‌ها و گرادیان‌ها با جهت RTL

## بهینه‌سازی برای دستگاه‌های مختلف

### واکنش‌پذیری
- تست تم در صفحه‌نمایش‌های مختلف
- بهینه‌سازی برای حالت تاریک در دستگاه‌های موبایل برای کاهش مصرف باتری
- پشتیبانی از ترجیحات سیستم‌عامل با استفاده از media query:
  `@media (prefers-color-scheme: dark)`

## دسترسی‌پذیری

### ملاحظات کنتراست
- حفظ نسبت کنتراست WCAG AA (حداقل 4.5:1 برای متن معمولی)
- تست کنتراست در هر دو حالت تم
- فراهم کردن گزینه‌های کنتراست بالا برای کاربران با مشکلات بینایی

## توسعه و نگهداری

### اضافه کردن عناصر جدید
- پیروی از الگوی نام‌گذاری موجود
- تعریف مقادیر متناسب برای هر دو تم
- تست سازگاری با سیستم تم موجود

### مستندسازی
- مستندسازی کامل متغیرهای رنگ و نحوه استفاده از آن‌ها
- نمونه‌های استفاده برای توسعه‌دهندگان جدید