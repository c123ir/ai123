<div dir="rtl">

# راهنمای جامع توسعه‌دهنده پروژه دستیار هوشمند ۱۲۳

این سند به منظور آشنا کردن توسعه‌دهندگان جدید با پروژه دستیار هوشمند ۱۲۳ (SmartAi123) تهیه شده است. هدف این مستندات، فراهم کردن دیدی کامل از معماری، اصول، استانداردها، و روش‌های توسعه پروژه است.

## ساختار کلی پروژه 

پروژه دستیار هوشمند ۱۲۳ از دو بخش اصلی تشکیل شده است:
1. **کلاینت (فرانت‌اند)**: ساخته شده با React، TypeScript و Material UI
2. **سرور (بک‌اند)**: قرار گرفته در مخزن اصلی گیت

### مخزن گیت
- مخزن اصلی: [https://github.com/c123ir/ai123](https://github.com/c123ir/ai123)
- همه تغییرات باید طبق روند توضیح داده شده در فایل `documents/14-GIT-DEVELOPMENT.md` انجام شود

## مستندات پروژه

پروژه دارای مستندات گسترده‌ای است که در دو مسیر اصلی قرار دارند:

```
documents/                     # مستندات عمومی پروژه
├── 00-CORE-PRINCIPLES.md      # اصول و قواعد اساسی پروژه
├── 01-PROJECT-SETUP.md        # راه‌اندازی محیط توسعه
├── 02-ARCHITECTURE.md         # معماری کلی پروژه
├── 03-CODING-STANDARDS.md     # استانداردهای کدنویسی
├── 04-DATABASE-DESIGN.md      # طراحی پایگاه داده
├── 05-DIGIT-CONVERSION.md     # تبدیل اعداد فارسی-انگلیسی
├── 06-TOKEN-SYSTEM.md         # سیستم توکن MoneyBell
├── 07-API-SERVICES.md         # مستندات API و وب‌سرویس‌ها
├── 08-SECURITY-AUTH.md        # امنیت و احراز هویت
├── 09-TESTING-QA.md           # تست و کنترل کیفیت
├── 10-MULTILINGUAL-RTL.md     # چندزبانگی و پشتیبانی RTL
├── 11-THEME-SYSTEM.md         # سیستم تم روشن/تاریک
├── 12-ERROR-HANDLING.md       # مدیریت خطا
├── 13-DEPLOYMENT-MAINTENANCE.md # استقرار و نگهداری
├── 14-GIT-DEVELOPMENT.md      # فرآیند توسعه و گیت
└── 15-FONTS-CALENDAR.md       # فونت‌های فارسی و تقویم شمسی

client/
├── src/
│   ├── docs/                  # مستندات کلاینت
│   │   ├── README.md          # راهنمای اصلی پروژه کلاینت
│   │   ├── CONTRIBUTION.md    # راهنمای مشارکت در پروژه
│   │   ├── API.md             # مستندات API
│   │   └── THEME.md           # راهنمای سیستم تم
```

### فایل‌های مستندات کلیدی

برای شروع کار با پروژه، مطالعه فایل‌های زیر ضروری است:

1. **`documents/00-CORE-PRINCIPLES.md`**: اصول و قواعد اساسی پروژه
2. **`documents/01-PROJECT-SETUP.md`**: راه‌اندازی محیط توسعه
3. **`documents/14-GIT-DEVELOPMENT.md`**: فرآیند توسعه و گیت
4. **`client/src/docs/README.md`**: معرفی کلی پروژه، ساختار فایل‌ها، نحوه راه‌اندازی محیط توسعه و معماری کلی
5. **`client/src/docs/API.md`**: مستندات نقاط پایانی API و نحوه تعامل کلاینت با سرور

## تکنولوژی‌های اصلی

### فرانت‌اند
- **React**: کتابخانه اصلی UI
- **TypeScript**: زبان برنامه‌نویسی با تایپ
- **Redux Toolkit**: مدیریت حالت برنامه
- **Material UI**: کتابخانه کامپوننت‌های UI
- **React Router**: مسیریابی
- **Axios**: درخواست‌های HTTP
- **i18next**: چندزبانگی
- **Formik & Yup**: مدیریت فرم‌ها و اعتبارسنجی
- **jalali-moment**: کار با تقویم شمسی

### بک‌اند
- **Node.js با Express و TypeScript**: چارچوب اصلی
- **PostgreSQL**: پایگاه داده اصلی
- **Redis**: کش و مدیریت جلسات
- **JWT**: احراز هویت
- **Swagger/OpenAPI**: مستندسازی API

### تست و کیفیت
- **Jest**: تست‌های فرانت‌اند
- **Mocha/Chai**: تست‌های بک‌اند
- **Cypress**: تست‌های E2E
- **ESLint و Prettier**: استایل کد

### استقرار
- **Docker**: کانتینرسازی
- **CI/CD با GitHub Actions**
- **زیرساخت ابری** (AWS، GCP یا Azure)

## اصول کلیدی پروژه

### 1. ساختار و نام‌گذاری
- پوشه اصلی پروژه: `ai123`
- زیرپوشه‌های اصلی: `server`، `client`، `docs`
- نام‌گذاری معنادار فایل‌ها به انگلیسی
- محتوای فایل‌ها به زبان فارسی

### 2. زبان و فرهنگ‌پذیری
- پشتیبانی کامل از RTL برای تمام بخش‌های برنامه
- استفاده از تقویم شمسی و فونت‌های فارسی (ترجیحاً وزیر یا یکان)
- تبدیل خودکار اعداد فارسی به انگلیسی در ورودی‌های کاربر
- استفاده از `react-i18next` برای چندزبانگی

### 3. سیستم تم
- طراحی با قابلیت حالت تاریک و روشن
- استفاده از متغیرهای CSS و React Context API
- متغیرهای رنگ با نام‌گذاری معنادار (مانند `--color-bg-primary`, `--color-text-primary`)
- رنگ‌های اصلی پروژه: سبز (`#4caf50`) و آبی (`#2196f3`)

### 4. مدیریت خطا
- ساختار استاندارد برای پیام‌های خطا
- طبقه‌بندی خطاها (کاربری، سیستمی، تجاری، امنیتی)
- نمایش خطاهای کاربرپسند بدون جزئیات فنی
- خطاهای API باید از طریق `notificationSlice` نمایش داده شوند

### 5. سیستم توکن MoneyBell
- پیاده‌سازی سیستم توکن اختصاصی برای تراکنش‌ها
- مدیریت امن تراکنش‌ها و موجودی‌ها
- گزارش‌گیری و مانیتورینگ تراکنش‌ها

## روند توسعه و گیت

### استراتژی شاخه‌بندی
- **main**: نسخه پایدار برای محیط تولید
- **develop**: شاخه اصلی توسعه
- **feature/[issue-number]-[description]**: شاخه‌های ویژگی
- **bugfix/[issue]**: رفع باگ‌ها
- **release/v[X.Y.Z]**: شاخه‌های آماده‌سازی انتشار
- **hotfix/[issue]**: رفع سریع مشکلات محیط تولید

### مراحل توسعه
1. **ایجاد شاخه جدید** از `develop` برای هر ویژگی یا اصلاح باگ
   ```bash
   git checkout develop
   git pull
   git checkout -b feature/[issue-number]-[description]
   ```

2. **کدنویسی** با رعایت استانداردها
   - پیروی از استانداردهای کدنویسی در `CONTRIBUTION.md`
   - استفاده از TypeScript برای تمام فایل‌ها
   - پیروی از سیستم تم توضیح داده شده در `THEME.md`

3. **بروزرسانی مستندات** همراه با کد
   - برای تغییرات API، فایل `API.md` را بروز کنید
   - برای کامپوننت‌های جدید، از JSDoc استفاده کنید
   - برای تغییرات معماری، `README.md` را بروز کنید

4. **تست و لینت**
   ```bash
   npm run lint
   npm run test
   ```

5. **کامیت** با رعایت قوانین در `CONTRIBUTION.md`
   ```bash
   git commit -m "feat(scope): توضیح تغییرات"
   ```

6. **ارسال تغییرات** و ایجاد Pull Request به شاخه `develop`
   ```bash
   git push origin feature/[your-branch]
   ```

7. **بازبینی کد** توسط حداقل یک توسعه‌دهنده دیگر

8. **ادغام** پس از تأیید و گذر از تمام تست‌ها

## معماری کلاینت
پروژه کلاینت از معماری Flux (Redux) پیروی می‌کند با ساختار پوشه‌ای زیر:
- `components/`: کامپوننت‌های قابل استفاده مجدد
  - `common/`: کامپوننت‌های عمومی
  - `admin/`: کامپوننت‌های مختص ادمین
  - `user/`: کامپوننت‌های مختص کاربر
  - `layout/`: کامپوننت‌های لایه‌ای
- `pages/`: صفحات اصلی برنامه
  - `admin/`: صفحات مختص ادمین
  - `user/`: صفحات مختص کاربر
  - `common/`: صفحات مشترک
- `features/`: اسلایس‌های Redux برای مدیریت حالت
- `services/`: سرویس‌های ارتباط با API
- `utils/`: توابع کمکی
  - `validation/`: توابع اعتبارسنجی
- `hooks/`: هوک‌های سفارشی React
- `context/`: Context‌های React
- `assets/`: تصاویر، فونت‌ها و سایر منابع
- `styles/`: استایل‌های سراسری
- `routes/`: تعاریف مسیرها
- `docs/`: مستندات پروژه

## راه‌اندازی محیط توسعه

برای راه‌اندازی پروژه، مراحل زیر را دنبال کنید:

1. **کلون کردن مخزن**:
   ```bash
   git clone https://github.com/c123ir/ai123.git
   cd ai123
   ```

2. **نصب وابستگی‌ها**:
   ```bash
   # برای سرور
   cd server
   npm install
   
   # برای کلاینت
   cd ../client
   npm install
   ```

3. **تنظیم فایل‌های محیطی**:
   - کپی `.env.example` به `.env` در هر دو پوشه سرور و کلاینت
   - تنظیم مقادیر مناسب متغیرهای محیطی

4. **راه‌اندازی پایگاه داده**:
   ```bash
   # ورود به PostgreSQL
   psql -U postgres
   # ایجاد پایگاه داده
   CREATE DATABASE smartai123;
   ```

5. **اجرای مهاجرت‌ها**:
   ```bash
   cd ../server
   npm run migrate
   ```

6. **اجرای برنامه در محیط توسعه**:
   ```bash
   # در یک ترمینال (سرور)
   cd server
   npm run dev
   
   # در ترمینال دیگر (کلاینت)
   cd client
   npm start
   ```

## نحوه به‌روزرسانی مستندات

مستندات پروژه باید به طور مداوم به‌روز شوند. برای به‌روزرسانی:

1. **مستندات عمومی**: 
   - فایل مربوطه را در پوشه `documents` پیدا کنید
   - تغییرات را با حفظ ساختار و فرمت فعلی اعمال کنید

2. **مستندات کلاینت**:
   - فایل مربوطه را در پوشه `client/src/docs/` پیدا کنید
   - تغییرات را با حفظ ساختار اعمال کنید

3. **کامیت تغییرات**:
   ```bash
   git commit -m "docs: بروزرسانی مستندات بخش X"
   ```

4. **مستندات جدید**:
   - برای مستندات عمومی، فایل جدیدی با فرمت `XX-NAME.md` در پوشه `documents` ایجاد کنید
   - برای مستندات کلاینت، فایل جدید را در پوشه `client/src/docs/` ایجاد کنید

## قوانین حیاتی پروژه

1. **قانون تبدیل اعداد**: تمام ورودی‌های عددی باید از فارسی به انگلیسی تبدیل شوند
   - از کامپوننت `DigitConverterInput` برای تبدیل اعداد فارسی به انگلیسی استفاده کنید

2. **قانون مستندسازی**: هر تغییر باید با به‌روزرسانی مستندات همراه باشد

3. **قانون پشتیبانی RTL**: تمام بخش‌های برنامه باید RTL باشند

4. **قانون ماژولاریتی**: کدهای طولانی باید به ماژول‌های کوچکتر تقسیم شوند

5. **قانون استانداردهای کامیت**: استفاده از فرمت استاندارد برای پیام‌های کامیت
   ```
   [نوع]: توضیح مختصر
   
   توضیحات بیشتر در صورت نیاز
   ```
   انواع کامیت: `feat`, `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `chore`

## نکات مهم برای توسعه‌دهندگان جدید

1. **چند زبانی**: پروژه از i18next برای چندزبانی استفاده می‌کند. تمام متون باید در فایل‌های ترجمه قرار گیرند.

2. **اعتبارسنجی فرم‌ها**: از Formik و Yup برای مدیریت و اعتبارسنجی فرم‌ها استفاده کنید.

3. **احراز هویت**: سیستم احراز هویت با JWT پیاده‌سازی شده است. توکن‌ها در localStorage ذخیره می‌شوند.

4. **کیفیت کد**:
   - استفاده از ESLint و Prettier برای فرمت کد
   - حداقل 70% پوشش تستی
   - نام‌گذاری معنادار و منظم
   - مستندسازی کامل با JSDoc

5. **امنیت**: 
   - اعتبارسنجی تمام ورودی‌ها
   - پیشگیری از حملات XSS و CSRF
   - استفاده از HTTPS
   - محدودیت نرخ برای API‌ها

## کارهای بعدی

قبل از شروع، لیست کارهای بعدی را بررسی کنید:
1. رفع خطاهای لینتر موجود
2. اصلاح مشکلات تایپ در `authSlice.ts`
3. بهبود مستندات کامپوننت‌ها
4. بروزرسانی استایل‌های تم بر اساس طراحی جدید
5. افزودن تست‌های واحد بیشتر

## منابع بیشتر و پشتیبانی

برای دسترسی به منابع بیشتر و پشتیبانی:

- مخزن گیت اصلی: [https://github.com/c123ir/ai123](https://github.com/c123ir/ai123)
- مستندات بیشتر در پوشه‌های `documents` و `client/src/docs`
- در صورت بروز مشکل، با تیم پشتیبانی تماس بگیرید

---

این راهنمای جامع به شما کمک می‌کند تا به سرعت با پروژه دستیار هوشمند ۱۲۳ آشنا شوید و بتوانید به توسعه آن کمک کنید. همواره از اصول و استانداردهای مستند شده پیروی کنید و با تیم هماهنگ باشید.

</div>
